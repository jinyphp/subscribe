# 001. Project Overview - subscribe Management System

## 프로젝트 개요
구독형 구독 관리 시스템의 TDD 기반 구현을 위한 종합적인 태스크 가이드입니다.

## 시스템 아키텍처

### Jiny 생태계 패키지 의존성
이 프로젝트는 기존 Jiny 패키지들과 완전히 통합되어 작동합니다:

#### jiny/admin 패키지 활용
- **관리자 테이블**: `users` (중앙집중식 관리)
- **인증 방식**: 세션 기반 인증
- **미들웨어**: `admin` (기존 Jiny Admin 미들웨어 활용)
- **접근 경로**: `/admin/subscribe/*`
- **통합**: 기존 Jiny Admin 사이드바 및 레이아웃 확장

#### jiny/auth 패키지 활용
- **고객/파트너 테이블**: 동적 샤딩 구조 (jiny/auth 설정 기반)
  - 샤드 수: `config('jiny-auth.sharding.shard_count')` (기본값: 100)
  - 테이블명: `config('jiny-auth.sharding.table_prefix')` + 샤드번호 (기본값: `users_001` ~ `users_099`)
- **인증 방식**: JWT 토큰 기반 무상태 인증
- **미들웨어**: `jwt.auth` (고객), `jwt.auth + partner.verify` (파트너)
- **확장성**: 대용량 사용자 처리를 위한 수평적 확장

### 3-Tier 사용자 시스템
1. **관리자 (Admin)**:
   - 패키지: `jiny/admin`
   - 테이블: `users` (세션 기반)
   - 미들웨어: `admin`
   - 접근: `/admin/subscribe/*`

2. **고객 (Customer)**:
   - 패키지: `jiny/auth`
   - 테이블: 동적 샤딩 (jiny/auth 설정 기반)
   - 미들웨어: `jwt.auth`
   - 접근: `/home/subscribe/*`

3. **파트너 (Partner)**:
   - 패키지: `jiny/auth` + 파트너 검증
   - 테이블: 동적 샤딩 + `partners`
   - 미들웨어: `jwt.auth + partner.verify`
   - 접근: `/partner/*`

### 핵심 기능
- **구독 카탈로그**: 구독 생성, 관리, 공개
- **구독 관리**: 구독 생명주기, 청구, 취소
- **파트너 트리**: 7단계 MLM 구조, 커미션 분배
- **무료 체험**: 4가지 체험 유형, 개인화, A/B 테스트

## TDD 구현 원칙

### HTTP 응답 검증
- 모든 성공 작업은 **HTTP 200** 반환 필수
- 오류 시나리오는 적절한 HTTP 상태 코드 (400, 401, 403, 404, 422, 500)
- 각 태스크는 성공/실패 케이스 모두 포함

### 테스트 카테고리
1. **단위 테스트**: 개별 컴포넌트 기능
2. **기능 테스트**: HTTP 요청이 포함된 종단간 기능
3. **통합 테스트**: 시스템 간 상호작용
4. **데이터베이스 테스트**: 데이터 저장 및 검색

## 구현 순서 및 의존관계

### Phase 1: 기초 인프라 (001-003)
- 001. 프로젝트 개요 (현재 문서)
- 002. 데이터베이스 스키마 설계
- 003. 인증 시스템 구축

### Phase 2: 핵심 구독 (004-005)
- 004. 구독 카탈로그 관리
- 005. 구독 관리 시스템

### Phase 3: 파트너 시스템 (006-008)
- 006. 파트너 트리 구조
- 007. 커미션 시스템
- 008. 무료 체험 시스템

### Phase 4: 시스템 통합 (009-012)
- 009. 라우트 등록 및 미들웨어
- 010. 관리자 인터페이스 레이아웃
- 011. 고객 인터페이스 레이아웃
- 012. 파트너 인터페이스 레이아웃

### Phase 5: 최종 검증 (013-015)
- 013. 종합 테스트 시나리오
- 014. 성능 최적화 및 보안
- 015. 배포 및 운영 가이드

## 의존관계 매트릭스

| 태스크 | 의존 태스크 | 설명 |
|--------|-------------|------|
| 002 | 001 | 데이터베이스는 프로젝트 개요 필요 |
| 003 | 002 | 인증은 사용자 테이블 필요 |
| 004 | 002, 003 | 구독 카탈로그는 DB와 인증 필요 |
| 005 | 004 | 구독은 구독 카탈로그 필요 |
| 006 | 003 | 파트너 트리는 사용자 시스템 필요 |
| 007 | 005, 006 | 커미션은 구독과 파트너 트리 필요 |
| 008 | 004, 005 | 무료 체험은 구독와 구독 필요 |
| 009 | 004-008 | 라우트는 모든 컨트롤러 완성 후 |
| 010-012 | 009 | UI는 라우트 완성 후 |
| 013-015 | 010-012 | 최종 단계는 모든 기능 완성 후 |

## 품질 보증 기준

### 기술적 기준
- **응답 시간**: 단순 GET < 100ms, 복잡한 쿼리 < 300ms
- **오류율**: 성공 작업의 < 0.1% 오류
- **가용성**: > 99.9% 업타임
- **보안**: 중요 취약점 0개
- **성능**: 1000+ 동시 사용자 지원

### 비즈니스 기준
- **체험 전환율**: > 25% 체험-구독 전환
- **파트너 성장**: 7단계 조직 지원
- **커미션 정확도**: 100% 정확한 계산
- **사용자 만족도**: > 4.5/5 평점

## 문서 규칙

### 파일 명명 규칙
- `XXX_task_name.md` 형식 (XXX는 3자리 번호)
- 소문자와 언더스코어 사용
- 명확하고 설명적인 이름

### 문서 구조
1. **개요**: 태스크 목적과 범위
2. **의존관계**: 선행 태스크 명시
3. **테스트 시나리오**: HTTP 200 검증 포함
4. **구현 체크리스트**: 단계별 완료 항목
5. **완료 기준**: 성공 조건 명시

## 시작하기

1. 의존관계 순서에 따라 태스크 진행
2. 각 태스크의 TDD 접근법 준수: 테스트 작성 → 구현
3. HTTP 200 응답 요구사항 충족
4. 체크리스트로 완료 상태 추적

## 프로젝트 성공 지표

### 완료 시점
- [ ] 모든 태스크 100% 완료
- [ ] 전체 테스트 스위트 통과
- [ ] 성능 벤치마크 충족
- [ ] 보안 감사 통과
- [ ] 사용자 수용 테스트 완료

### 예상 일정
- **총 기간**: 8-12주
- **Phase 1-2**: 3-4주 (기초 및 핵심)
- **Phase 3**: 2-3주 (파트너 시스템)
- **Phase 4**: 2-3주 (UI 및 통합)
- **Phase 5**: 1-2주 (테스트 및 배포)

---

**다음 태스크**: [002. 데이터베이스 스키마 설계](002_database_schema.md)
**관련 문서**: [전체 구현 체크리스트](015_implementation_checklist.md)
